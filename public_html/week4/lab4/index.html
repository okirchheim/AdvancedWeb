<!DOCTYPE html>

<html>
    <head>
        <title>Index</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <ul class="links">
            <li>About</li>
            <li>Form</li>            
        </ul>
        
        <div>
            <p class="index">
                Sed ut perspiciatis unde omnis iste natus error sit
            voluptatem accusantium doloremque laudantium, totam
            rem aperiam, eaque ipsa quae ab illo inventore veritatis
            et quasi architecto beatae vitae dicta sunt explicabo. Nemo
            enim ipsam voluptatem quia voluptas sit aspernatur aut odit
            aut fugit, sed quia consequuntur magni dolores eos qui ratione
            voluptatem sequi nesciunt. Neque porro quisquam est, qui
            dolorem ipsum quia dolor sit amet, consectetur, adipisci
            velit, sed quia non numquam eius modi tempora incidunt
            ut labore et dolore magnam aliquam quaerat voluptatem. 
            Ut enim ad minima veniam, quis nostrum exercitationem ullam
            corporis suscipit laboriosam, nisi ut aliquid ex ea commodi
            consequatur? Quis autem vel eum iure reprehenderit qui 
            in ea voluptate velit esse quam nihil molestiae consequatur,
            vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?
            </p>
        </div> 
        
<script type="text/javascript"> 

function makeRequest(url)
{
    var promise = new Promise( httpPromise );

    function httpPromise(resolve, reject)
    { 
            var httpRequest = new XMLHttpRequest();

             if ( !httpRequest )
             {
               reject('Giving up :( Cannot create an XMLHTTP instance');
             }

 httpRequest.open('GET', url);
 httpRequest.send();

 httpRequest.addEventListener('load', httpResolve.bind(httpRequest));
 httpRequest.addEventListener('error', httpReject.bind(httpRequest));

     function httpResolve()
     {                        
        if ( this.status >= 200 && this.status < 300 ) {
            // Performs the function "resolve" when this.status is equal to 2xx
            resolve(JSON.parse(this.response));
        } else {
            // Performs the function "reject" when this.status is different than 2xx
            reject(this.statusText);
        }                          
     }

     function httpReject()
     {
         reject(this.statusText);
     }
 }
// Return the promise
return promise;
}

var callback = {
    success: function(data)
    {
       displayList(data);      
    },
error: function(data)
    {
        console.log(2, 'error', data);
    }};

makeRequest("http://localhost:3000/index.html").then(callback.success, callback.error);
makeRequest("http://localhost:3000/form.html").then(callback2.success, callback2.error);
makeRequest("http://localhost:3000/about.html").then(callback3.success, callback3.error);
             
window.addEventListener('load', displayList.bind(null, 'ul.links'));

</script>
</body>
</html>

